@using Newtonsoft.Json
@model GraParagrafowa.Models.GameDTO

@{
    ViewData["Title"] = "Edit";
}
@section head {
    <link rel="stylesheet" href="~/css/creator.css" />
    <script src="~/js/UpdateKreator.js"></script>
    <script src="~/js/SaveUpdate.js"></script>
    <script src="~/js/update.js"></script>
}
<div id="creator-header">
    <div>
        <h1 style="display:inline-block">Zaktualizuj Historię</h1>
        Nazwa Historii:
        <input type="text" name="Name" value="@Model.story.Name" />
        <input type="hidden" name="counter" value="0" />
        <input type="file" name="Photo"></input>
    </div>
    <div style="width:300px">
        <button id="Save">Zapisz</button>
        <button id="toggleSize">Zmień rozmiar</button><br />
        <span id="successMessage" style="display: none; color: green;">Dane zapisane poprawnie.</span>
        <span id="errorMessage" style="display: none; color: red;">Błąd podczas zapisywania danych.</span>
    </div>
</div>
<div id="zoom-content">

    @* <div class="global">
    <div class="parent">

    </div>
    <div class="children">

    </div>
    </div> *@

    
</div>
<script>
    // Definicja danych modelu w formacie JSON
    var gameData = @Html.Raw(JsonConvert.SerializeObject(Model));
    console.log(gameData);
    //console.log("DTO: ", dto)
    //console.log("name: ", story.Name);
    

    //Inicjalizacja odtwarzacza po załadowaniu strony
    $(document).ready(function () {
        initializeUpdater(gameData);
    });
</script>
@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
